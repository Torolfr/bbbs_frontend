{"version":3,"sources":["components/TagsList/TagsList.js","api/video-page.js","pages/Video/locales/RU.js","pages/Video/Video.js"],"names":["TagsList","filterList","name","handleClick","classNames","sectionClass","join","trim","classNamesList","length","className","map","item","value","filter","title","isActive","onClick","defaultProps","getVideoPageData","limit","offset","tags","resource_group","query","axios","get","baseURL","apiUrl","params","then","response","data","catch","err","Promise","reject","getVideoPageTags","getVideoById","id","videoPageTexts","headTitle","MAIN_PAGE_TITLE","VIDEO_TITLE","headDescription","textStubNoData","paragraphNoContent","PAGE_SIZE_PAGINATE","small","medium","big","default","MAX_SCREEN_WIDTH","Video","state","useLocation","openPopupVideo","useContext","PopupsContext","usePageWidth","pageSize","isSmallQuery","useState","isPageError","setIsPageError","filtersAndPaginationSettings","apiGetDataCallback","apiGetFiltersCallback","apiFilterNames","resourceGroup","isVideoPage","useFiltrationWithMainCard","dataToRender","filters","mainCard","isMainCard","isMainCardShown","isPageLoading","isFiltersUsed","isPaginationUsed","isNoFilteredResults","totalPages","pageIndex","changePageIndex","changeFilter","useEffect","res","setLocalStorageData","localStChosenVideo","isCentered","BasePage","AnimatedPageContainer","titleText","ERROR_MESSAGES","generalErrorMessage","renderFilters","isPaginate","renderCardsContainer","renderPageContent","text","isAnimated","CardVideoMain","isMobile","CardFilm","isVideo","renderPaginate","pageCount","onChange"],"mappings":"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","file":"static/js/15.afa5ead9.chunk.js","sourcesContent":["import PropTypes from 'prop-types';\nimport { PseudoButtonTag } from '../utils';\nimport './TagsList.scss';\n\nconst centeringFiltersMaxLength = 3;\n\nfunction TagsList({ filterList, name, handleClick, sectionClass }) {\n  const classNames = ['tags', sectionClass].join(' ').trim();\n  const classNamesList = [\n    'tags__list',\n    filterList.length > centeringFiltersMaxLength ? 'tags__list_mobile' : '',\n  ]\n    .join(' ')\n    .trim();\n\n  return (\n    <div className={classNames}>\n      <ul className={classNamesList}>\n        {filterList.map((item) => (\n          <li className=\"tags__list-item\" key={item?.name}>\n            <PseudoButtonTag\n              name={name}\n              value={item?.filter}\n              title={item?.name}\n              isActive={item?.isActive}\n              onClick={handleClick}\n            />\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nTagsList.propTypes = {\n  filterList: PropTypes.arrayOf(PropTypes.any),\n  sectionClass: PropTypes.string,\n  name: PropTypes.string,\n  handleClick: PropTypes.func,\n};\n\nTagsList.defaultProps = {\n  filterList: [],\n  sectionClass: '',\n  name: '',\n  handleClick: () => {},\n};\n\nexport default TagsList;\n","/* eslint-disable camelcase */\nimport axios from 'axios';\nimport { apiUrl, baseURL } from '../config/config';\n\n// получение/фильтрация видео на странице \"Видео\"\nfunction getVideoPageData({ limit, offset, tags, resource_group }) {\n  const query = resource_group\n    ? { limit, offset, tags, resource_group }\n    : { limit, offset, tags };\n  return axios\n    .get(`${baseURL}${apiUrl}/videos/`, {\n      params: query,\n    })\n    .then((response) => response.data)\n    .catch((err) => Promise.reject(err?.response));\n}\n\n// получение категорий видео (список фильтров)\nfunction getVideoPageTags() {\n  return axios\n    .get(`${baseURL}${apiUrl}/videos/tags/`)\n    .then((response) => response.data)\n    .catch((err) => Promise.reject(err?.response));\n}\n\n// получение одного видео\nfunction getVideoById(id) {\n  return axios\n    .get(`${baseURL}${apiUrl}/videos/${id}/`)\n    .then((response) => response.data)\n    .catch((err) => Promise.reject(err?.response));\n}\n\nexport { getVideoPageTags, getVideoPageData, getVideoById };\n","import { MAIN_PAGE_TITLE, VIDEO_TITLE } from '../../../config/routes';\n\nconst videoPageTexts = {\n  headTitle: `${MAIN_PAGE_TITLE} | ${VIDEO_TITLE}`,\n  headDescription: 'Страница с видео контентом',\n  title: VIDEO_TITLE,\n  textStubNoData:\n    'В данный момент страница с видео пуста. Возвращайтесь позже!',\n  paragraphNoContent: 'По вашему запросу ничего не нашлось.',\n};\n\nexport default videoPageTexts;\n","import { useContext, useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport videoPageTexts from './locales/RU';\nimport { ERROR_MESSAGES, localStChosenVideo } from '../../config/constants';\nimport { PopupsContext } from '../../contexts';\nimport { useFiltrationWithMainCard, usePageWidth } from '../../hooks';\nimport {\n  getVideoById,\n  getVideoPageData,\n  getVideoPageTags,\n} from '../../api/video-page';\nimport { setLocalStorageData } from '../../hooks/useLocalStorage';\nimport {\n  AnimatedPageContainer,\n  BasePage,\n  CardFilm,\n  CardVideoMain,\n  Loader,\n  NoDataNotificationBox,\n  Paginate,\n  TagsList,\n  TitleH1,\n} from './index';\nimport './Video.scss';\n\nconst PAGE_SIZE_PAGINATE = {\n  small: 8,\n  medium: 8,\n  big: 12,\n  default: 16,\n};\n\nconst MAX_SCREEN_WIDTH = {\n  small: 767,\n  medium: 1023,\n  big: 1450,\n};\n\nconst {\n  headTitle,\n  headDescription,\n  title,\n  textStubNoData,\n  paragraphNoContent,\n} = videoPageTexts;\n\nconst Video = () => {\n  // работа с открытием попапа видое при переходе из поиска\n  const { state } = useLocation();\n  const { openPopupVideo } = useContext(PopupsContext);\n  // определяет, сколько карточек показывать на странице в зависимости от ширины экрана\n  const { pageSize, isSmallQuery } = usePageWidth(\n    MAX_SCREEN_WIDTH,\n    PAGE_SIZE_PAGINATE\n  );\n  // стейт ошибки\n  const [isPageError, setIsPageError] = useState(false);\n\n  // фильтрация и пагинация\n  const filtersAndPaginationSettings = {\n    apiGetDataCallback: getVideoPageData,\n    apiGetFiltersCallback: getVideoPageTags,\n    apiFilterNames: {\n      tags: 'tags',\n      resourceGroup: 'resource_group',\n    },\n    pageSize,\n    setIsPageError,\n    isVideoPage: true,\n  };\n\n  const {\n    dataToRender,\n    filters,\n    mainCard,\n    isMainCard,\n    isMainCardShown,\n    isPageLoading,\n    isFiltersUsed,\n    isPaginationUsed,\n    isNoFilteredResults,\n    totalPages,\n    pageIndex,\n    changePageIndex,\n    changeFilter,\n  } = useFiltrationWithMainCard(filtersAndPaginationSettings);\n\n  // Откртие попапа при переходе из поиска\n  useEffect(() => {\n    if (state) {\n      getVideoById(state.id)\n        .then((res) => {\n          setLocalStorageData(localStChosenVideo, res);\n          openPopupVideo();\n        })\n        .catch(() => setIsPageError(true));\n    }\n  }, [state]);\n\n  // Лоадер при загрузке страницы\n  if (isPageLoading) {\n    return <Loader isCentered />;\n  }\n\n  return (\n    <BasePage headTitle={headTitle} headDescription={headDescription}>\n      {renderPageContent()}\n    </BasePage>\n  );\n\n  function renderPageContent() {\n    if (\n      isPageError ||\n      (!dataToRender.length && !isMainCard && !isPageLoading)\n    ) {\n      return renderAnimatedContainer();\n    }\n\n    return (\n      <>\n        <section className=\"lead page__section\">\n          <TitleH1 title={title} sectionClass=\"video__title\" />\n          {renderFilters()}\n        </section>\n\n        {isFiltersUsed ? <Loader isPaginate /> : renderCardsContainer()}\n      </>\n    );\n  }\n\n  // контейнер заглушки\n  function renderAnimatedContainer() {\n    return (\n      <AnimatedPageContainer\n        titleText={\n          isPageError\n            ? ERROR_MESSAGES.generalErrorMessage.title\n            : textStubNoData\n        }\n      />\n    );\n  }\n\n  function renderFilters() {\n    // учитываем также кннопку ВСЕ\n    if (filters.length > 2) {\n      return (\n        <TagsList\n          filterList={filters}\n          name=\"videos\"\n          handleClick={changeFilter}\n        />\n      );\n    }\n    return null;\n  }\n\n  function renderCardsContainer() {\n    if (isNoFilteredResults) {\n      return (\n        <NoDataNotificationBox\n          text={paragraphNoContent}\n          isAnimated\n          sectionClass=\"no-data-text_padding-top\"\n        />\n      );\n    }\n\n    return (\n      <>\n        {isPaginationUsed ? <Loader isPaginate /> : renderCards()}\n        {renderPaginate()}\n      </>\n    );\n  }\n\n  function renderCards() {\n    return (\n      <>\n        {isMainCardShown && (\n          <section className=\"video__main-card page__section scale-in\">\n            <CardVideoMain data={mainCard} isMobile={isSmallQuery} />\n          </section>\n        )}\n\n        <section className=\"video__cards-grid page__section\">\n          {dataToRender.map((item) => (\n            <CardFilm\n              key={item?.id}\n              data={item}\n              sectionClass=\"scale-in\"\n              isMobile={isSmallQuery}\n              isVideo\n            />\n          ))}\n        </section>\n      </>\n    );\n  }\n\n  function renderPaginate() {\n    if (totalPages > 1) {\n      return (\n        <section className=\"video__cards-paginate\">\n          <Paginate\n            sectionClass=\"cards-section__pagination \"\n            pageCount={totalPages}\n            value={pageIndex}\n            onChange={changePageIndex}\n          />\n        </section>\n      );\n    }\n    return null;\n  }\n};\n\nexport default Video;\n"],"sourceRoot":""}