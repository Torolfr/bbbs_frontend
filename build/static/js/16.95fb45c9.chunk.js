(this.webpackJsonpbbbs_team3_react=this.webpackJsonpbbbs_team3_react||[]).push([[16],{175:function(e,t,n){"use strict";var i=n(4),a=(n(176),n(0));function c(e){var t=e.filterList,n=e.name,c=e.handleClick,s=["tags",e.sectionClass].join(" ").trim(),o=["tags__list",t.length>3?"tags__list_mobile":""].join(" ").trim();return Object(a.jsx)("div",{className:s,children:Object(a.jsx)("ul",{className:o,children:t.map((function(e){return Object(a.jsx)("li",{className:"tags__list-item",children:Object(a.jsx)(i.r,{name:n,value:null===e||void 0===e?void 0:e.filter,title:null===e||void 0===e?void 0:e.name,isActive:null===e||void 0===e?void 0:e.isActive,onClick:c})},null===e||void 0===e?void 0:e.name)}))})})}c.defaultProps={filterList:[],sectionClass:"",name:"",handleClick:function(){}},t.a=c},176:function(e,t,n){},205:function(e,t,n){},256:function(e,t,n){"use strict";n.r(t);var i=n(3),a=n(1),c=n(15),s=n(5),o={headTitle:"".concat(s.n," | ").concat(s.c),headDescription:"\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u0439 \u0438 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0439 \u0434\u043b\u044f \u043d\u0430\u0441\u0442\u0430\u0432\u043d\u0438\u043a\u043e\u0432.",title:s.c,textStubNoData:"\u041c\u044b \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u043c \u043d\u0430\u0434 \u043f\u043b\u0430\u043d\u043e\u043c \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0439 \u043d\u0430 \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0435 \u043c\u0435\u0441\u044f\u0446\u044b."},r=n(7),l=n(2),u=n(11),d=n(9),j=n(14),f=n.n(j),b=n(6);function g(e){var t=e.limit,n=e.offset,i=e.months;return f.a.get("".concat(b.b).concat(b.a,"/afisha/events/"),{params:{limit:t,offset:n,months:i}}).then((function(e){return e.data})).catch((function(e){return Promise.reject(null===e||void 0===e?void 0:e.response)}))}function h(){return f.a.get("".concat(b.b).concat(b.a,"/afisha/events/months/")).then((function(e){return e.data.months})).catch((function(e){return Promise.reject(null===e||void 0===e?void 0:e.response)}))}var v=n(45),m=n(51),p=n(46),O=n(175),x=n(4),_=(n(205),n(0)),C=o.headTitle,P=o.headDescription,k=o.title,E=o.textStubNoData,N={small:6,medium:8,default:12},D={small:1024,medium:1440};t.default=function(){var e=Object(a.useContext)(r.b).currentUser,t=Object(a.useContext)(r.d),n=t.openPopupLogin,s=t.openPopupAboutEvent,o=Object(c.h)().state,j=Object(u.n)(D,N).pageSize,S=Object(a.useState)(null),F=Object(i.a)(S,2),T=F[0],w=F[1],L=Object(a.useState)(!1),I=Object(i.a)(L,2),R=I[0],U=I[1],A=Object(a.useState)(!1),z=Object(i.a)(A,2),G=z[0],J=z[1],W={apiGetDataCallback:g,apiGetFiltersCallback:h,apiFilterNames:{tags:"months"},pageSize:j,setIsPageError:J,isCalendarPage:!0},q=Object(u.h)(W),y=q.dataToRender,B=q.filters,M=q.isPageLoading,H=q.isFiltersUsed,K=q.isPaginationUsed,Q=q.totalPages,V=q.pageIndex,X=q.changePageIndex,Y=q.changeFilter,Z=q.firstPageRender;Object(a.useEffect)((function(){e?M&&j&&Z():n()}),[e,j]),Object(a.useEffect)((function(){w(y),R&&U(!1)}),[y]),Object(a.useEffect)((function(){e&&!M&&(U(!0),Z(),window.scrollTo({top:0}))}),[null===e||void 0===e?void 0:e.city]),Object(a.useEffect)((function(){var e;o&&(e=o.id,f.a.get("".concat(b.b).concat(b.a,"/afisha/events/").concat(e,"/")).then((function(e){return e.data})).catch((function(e){return Promise.reject(null===e||void 0===e?void 0:e.response)}))).then((function(e){Object(d.e)(l.m,e),s()})).catch((function(){return J(!0)}))}),[o]);var $=Object(u.g)(),ee=$.handleEventBooking,te=$.selectedEvent,ne=$.isWaitingResponse;return Object(a.useEffect)((function(){te&&w((function(){return T.map((function(e){return e.id===te.id?te:e}))}))}),[te]),M||!e?Object(_.jsx)(x.k,{isCentered:!0}):Object(_.jsx)(v.a,{headTitle:C,headDescription:P,children:Object(_.jsx)("section",{className:"calendar-page page__section fade-in",children:function(){if(e&&(G||!(null===T||void 0===T?void 0:T.length)))return R?Object(_.jsx)(x.k,{isPaginate:!0}):Object(_.jsx)(p.a,{titleText:G?l.h.generalErrorMessage.title:E});if(e)return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(x.w,{title:k,sectionClass:"calendar-page__title"}),Object(_.jsx)("div",{className:"calendar-page__container",children:R?Object(_.jsx)(x.k,{isPaginate:!0}):Object(_.jsxs)(_.Fragment,{children:[ie(),H?Object(_.jsx)(x.k,{isPaginate:!0}):Object(_.jsxs)(_.Fragment,{children:[ae(),ce()]})]})})]});return null}()})});function ie(){return B.length>2?Object(_.jsx)(O.a,{filterList:B,name:"month",handleClick:Y}):null}function ae(){return K?Object(_.jsx)(x.k,{isPaginate:!0}):Object(_.jsx)("div",{className:"calendar-page__grid",children:T.map((function(e){var t;return Object(_.jsx)(m.a,{cardData:e,onEventSignUpClick:ee,onEventDescriptionClick:s,sectionClass:"scale-in",isWaitingResponse:ne,loadingEventId:ne?null===(t=Object(d.c)(l.m))||void 0===t?void 0:t.id:void 0},e.id)}))})}function ce(){return Q>1?Object(_.jsx)(x.q,{sectionClass:"cards-section__pagination",pageCount:Q,value:V,onChange:X}):null}}}}]);