{"version":3,"sources":["api/rights-page.js","pages/RightsArticle/locales/RU.js","pages/RightsArticle/RightsArticle.js"],"names":["getRightsData","limit","offset","tags","axios","get","baseURL","apiUrl","params","then","response","data","catch","err","Promise","reject","getRightsTags","getRightsArticle","id","rightsArticlePageTexts","headTitle","headDescription","stubButtonText","RightsArticle","articleId","useParams","state","useLocation","history","useHistory","useScrollToTop","useState","articleData","setArticleData","isLoadingPage","setIsLoadingPage","isPageError","setIsPageError","getArticleData","res","status","ERROR_CODES","notFound","push","NOT_FOUND_URL","finally","useEffect","fromRightsPage","activeTags","BasePage","title","description","isHeaderTransparentOnTop","isPaginate","AnimatedPageContainer","titleText","ERROR_MESSAGES","generalErrorMessage","urlBack","RIGHTS_URL","buttonText","staticPage","className","body","renderNextPageBlock","renderMainContent","nextArticle","link","pathname","text","href"],"mappings":"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","file":"static/js/19.83b002cd.chunk.js","sourcesContent":["import axios from 'axios';\nimport { apiUrl, baseURL } from '../config/config';\n\n// получение всех \"прав\" на странице Права\nfunction getRightsData({ limit, offset, tags }) {\n  return axios\n    .get(`${baseURL}${apiUrl}/rights/`, {\n      params: { tags, limit, offset },\n    })\n    .then((response) => response.data)\n    .catch((err) => Promise.reject(err?.response));\n}\n\n// получение категорий прав (список фильтров)\nfunction getRightsTags() {\n  return axios\n    .get(`${baseURL}${apiUrl}/rights/tags/`)\n    .then((response) => response.data)\n    .catch((err) => Promise.reject(err?.response));\n}\n\n// получение Статьи для страницы Права Детей\nfunction getRightsArticle({ id, tags }) {\n  return axios\n    .get(`${baseURL}${apiUrl}/rights/${id}/`, {\n      params: { tags },\n    })\n    .then((response) => response.data)\n    .catch((err) => Promise.reject(err?.response));\n}\n\nexport { getRightsData, getRightsTags, getRightsArticle };\n","const rightsArticlePageTexts = {\n  headTitle: 'Статья',\n  headDescription: 'Полезная статья',\n  stubButtonText: 'Вернуться назад',\n};\n\nexport default rightsArticlePageTexts;\n","import { useEffect, useState } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { useHistory, useLocation, useParams } from 'react-router-dom';\nimport rightsArticlePageTexts from './locales/RU';\nimport { ERROR_CODES, ERROR_MESSAGES } from '../../config/constants';\nimport { NOT_FOUND_URL, RIGHTS_URL } from '../../config/routes';\nimport { useScrollToTop } from '../../hooks';\nimport { getRightsArticle } from '../../api/rights-page';\nimport {\n  AnimatedPageContainer,\n  BasePage,\n  Loader,\n  NextArticleLink,\n} from './index';\nimport './RightsArticle.scss';\n\nconst { headTitle, headDescription, stubButtonText } = rightsArticlePageTexts;\n\nfunction RightsArticle() {\n  const { articleId } = useParams();\n  const { state } = useLocation();\n  const history = useHistory();\n\n  useScrollToTop([articleId]);\n\n  const [articleData, setArticleData] = useState({});\n  const [isLoadingPage, setIsLoadingPage] = useState(true);\n  // Стейт ошибки\n  const [isPageError, setIsPageError] = useState(false);\n\n  const getArticleData = ({ id, tags }) => {\n    getRightsArticle({ id, tags })\n      .then((res) => setArticleData(res))\n      .catch((err) => {\n        if (err.status === ERROR_CODES.notFound) history.push(NOT_FOUND_URL);\n        else setIsPageError(true);\n      })\n      .finally(() => {\n        setIsLoadingPage(false);\n      });\n  };\n\n  useEffect(() => {\n    if (articleId) {\n      setIsLoadingPage(true);\n      if (state?.fromRightsPage) {\n        const params = state.activeTags\n          ? { id: articleId, tags: state.activeTags }\n          : { id: articleId };\n        getArticleData(params);\n      } else {\n        getArticleData({ id: articleId });\n      }\n    }\n  }, [articleId]);\n\n  return (\n    <BasePage\n      headTitle={articleData.title ?? headTitle}\n      headDescription={articleData.description ?? headDescription}\n      isHeaderTransparentOnTop\n    >\n      {isLoadingPage ? <Loader isPaginate /> : renderMainContent()}\n    </BasePage>\n  );\n\n  function renderMainContent() {\n    if (isPageError) {\n      return (\n        <AnimatedPageContainer\n          titleText={ERROR_MESSAGES.generalErrorMessage.title}\n          urlBack={RIGHTS_URL}\n          buttonText={stubButtonText}\n          staticPage\n        />\n      );\n    }\n\n    return (\n      <>\n        {renderLeadBlock()}\n        <div className=\"rights-article page__section fade-in\">\n          <div className=\"rights-article__container\">\n            {renderHtmlBlock()}\n            {renderNextPageBlock()}\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderLeadBlock() {\n    return (\n      <section className=\"article-lead fade-in\">\n        <div className=\"article-lead__content\">\n          <h1 className=\"chapter-title article-lead__title\">\n            {articleData.title}\n          </h1>\n          <p className=\"section-title article-lead__text\">\n            {articleData.description}\n          </p>\n        </div>\n      </section>\n    );\n  }\n\n  function renderHtmlBlock() {\n    return (\n      <ReactMarkdown className=\"markdown rights-article__markdown\">\n        {articleData.body}\n      </ReactMarkdown>\n    );\n  }\n\n  function renderNextPageBlock() {\n    if (articleData && articleData.nextArticle) {\n      // если пришли со страницы Прав, то передаём активные теги в линку\n      const link = state?.fromRightsPage\n        ? {\n            pathname: `/rights/${articleData.nextArticle.id}`,\n            state: { fromRightsPage: true, activeTags: state.activeTags },\n          }\n        : `/rights/${articleData.nextArticle.id}`;\n\n      return (\n        <NextArticleLink text={articleData.nextArticle.title} href={link} />\n      );\n    }\n    return null;\n  }\n}\n\nexport default RightsArticle;\n"],"sourceRoot":""}