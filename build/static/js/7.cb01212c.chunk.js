(this.webpackJsonpbbbs_team3_react=this.webpackJsonpbbbs_team3_react||[]).push([[7],{175:function(e,t,a){"use strict";var n=a(4),i=(a(176),a(0));function c(e){var t=e.filterList,a=e.name,c=e.handleClick,r=["tags",e.sectionClass].join(" ").trim(),o=["tags__list",t.length>3?"tags__list_mobile":""].join(" ").trim();return Object(i.jsx)("div",{className:r,children:Object(i.jsx)("ul",{className:o,children:t.map((function(e){return Object(i.jsx)("li",{className:"tags__list-item",children:Object(i.jsx)(n.s,{name:a,value:null===e||void 0===e?void 0:e.filter,title:null===e||void 0===e?void 0:e.name,isActive:null===e||void 0===e?void 0:e.isActive,onClick:c})},null===e||void 0===e?void 0:e.name)}))})})}c.defaultProps={filterList:[],sectionClass:"",name:"",handleClick:function(){}},t.a=c},176:function(e,t,a){},178:function(e,t,a){"use strict";var n={linkText:"\u0447\u0438\u0442\u0430\u0442\u044c \u043d\u0430 \u0441\u0430\u0439\u0442\u0435"},i=a(6),c=a(46),r=a(4),o=(a(180),a(0));function s(e){var t=e.data,a=t.title,s=t.info,l=t.annotation,d=t.image,m=t.articleUrl,u=e.isMain,p=e.color,j=["card-container",u?"card-container_type_main-article":"card-container_type_article fade-in",e.sectionClass].join(" ").trim(),b=u?"yellow":p;return Object(o.jsxs)("article",{className:j,children:[Object(o.jsxs)(r.f,{sectionClass:"article-card ".concat(u?"article-card_main":""),color:b,children:[Object(o.jsxs)("div",{className:"article-card__title-wrap",children:[Object(o.jsx)("a",{draggable:"false",href:m,className:"article-card__link-wrap",target:"_blank",rel:"noopener noreferrer",children:Object(o.jsx)(r.y,{sectionClass:"article-card__title",title:a})}),Object(o.jsx)(r.e,{sectionClass:"article-card__info",title:s})]}),u&&Object(o.jsx)("div",{className:"article-card__link-wrap article-card__link-wrap_content_article-img",children:d&&Object(o.jsx)("img",{draggable:"false",src:"".concat(i.c,"/").concat(d),alt:a,className:"article-card__image"})}),Object(o.jsx)("a",{draggable:"false",href:m,className:"link article-card__link",target:"_blank",rel:"noopener noreferrer",children:n.linkText})]}),Object(o.jsx)(c.a,{description:l,isMain:u})]})}s.defaultProps={data:{},title:"",info:"",image:"",articleUrl:"",annotation:"",isMain:!1,color:"white",sectionClass:""};t.a=s},180:function(e,t,a){},187:function(e,t,a){"use strict";var n=a(44);a.d(t,"b",(function(){return n.a}));var i=a(178);a.d(t,"d",(function(){return i.a}));var c=a(45);a.d(t,"a",(function(){return c.a}));var r=a(4);a.d(t,"h",(function(){return r.x})),a.d(t,"g",(function(){return r.r})),a.d(t,"e",(function(){return r.l})),a.d(t,"f",(function(){return r.p})),a.d(t,"c",(function(){return r.f}))},212:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){},252:function(e,t,a){"use strict";a.r(t);var n=a(3),i=a(1),c=a(15),r=a(71),o=a(7),s=a(2),l=a(11),d=a(56),m=a(44),u=a(51),p={closeButtonlabel:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0444\u043e\u0440\u043c\u0443",recommendadionTextPart1:"\u0415\u0441\u043b\u0438 \u0432\u044b \u0431\u044b\u043b\u0438 \u0432 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u043e\u043c \u043c\u0435\u0441\u0442\u0435 \u0438 \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u043e\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u043e\u0432\u0430\u0442\u044c \u0435\u0433\u043e \u0434\u0440\u0443\u0433\u0438\u043c".concat("\xa0","\u043d\u0430\u0441\u0442\u0430\u0432\u043d\u0438\u043a\u0430\u043c \u2013","\xa0"),recommendadionButton:"\u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435".concat("\xa0","\u0444\u043e\u0440\u043c\u0443"),recommendadionTextPart2:", \u0438 \u043c\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u043c \u0432\u0430\u0448\u0443".concat("\xa0","\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u044e.")},j={titlePlaceholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435*",linkPlaceholder:"\u0421\u0430\u0439\u0442",addressPlaceholder:"\u0410\u0434\u0440\u0435\u0441*",genderMale:"\u041c\u0430\u043b\u044c\u0447\u0438\u043a",genderFemale:"\u0414\u0435\u0432\u043e\u0447\u043a\u0430",agePlaceholder:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442*",activityPlaceholder:"\u0422\u0438\u043f \u043e\u0442\u0434\u044b\u0445\u0430*",cityPlaceholder:"\u0413\u043e\u0440\u043e\u0434*",descPlaceholder:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439* \u041f\u043e\u0434\u0435\u043b\u0438\u0442\u0435\u0441\u044c \u0432\u043f\u0435\u0447\u0430\u0442\u043b\u0435\u043d\u0438\u044f\u043c\u0438 \u043e \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u043d\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438",descPlaceholderMobile:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439*",buttonText:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c",buttonTextLoading:"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430...",addPhotoBtnDefault:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e",addPhotoBtnChange:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c",addPhotoAdded:"\u0424\u043e\u0442\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e"},b=a(49),h=a(4),f=(a(212),a(0)),g=j.titlePlaceholder,_=j.linkPlaceholder,x=j.addressPlaceholder,v=j.genderMale,O=j.genderFemale,C=j.agePlaceholder,y=j.activityPlaceholder,P=j.cityPlaceholder,N=j.descPlaceholder,T=j.descPlaceholderMobile,k=j.buttonText,S=j.addPhotoBtnDefault,w=j.addPhotoBtnChange,F=j.addPhotoAdded,L=j.buttonTextLoading,R={minLength:5,maxLength:50},E={minLength:5,maxLength:50},M={min:8,max:25};function B(e){var t=e.isOpen,a=e.onSubmit,c=e.activityTypes,r=e.isWaitingResponse,d=Object(i.useState)(""),m=Object(n.a)(d,2),u=m[0],p=m[1];Object(i.useEffect)((function(){var e=window.matchMedia("(max-width: ".concat(900,"px)")),t=function(){e.matches?p(T):p(N)};return t(),e.addEventListener("change",t),function(){e.removeEventListener("change",t)}}),[]);var j=Object(i.useContext)(o.a).cities,B=Object(i.useContext)(o.c),D=B.serverError,q=B.clearError,A=D?Object(b.a)(D):"",I=Object(i.useState)(!1),G=Object(n.a)(I,2),U=G[0],z=G[1],W=Object(l.k)(),V=W.values,J=W.handleChange,H=W.errors,K=W.isValid,Q=W.resetForm,X=W.handleChangeFiles;Object(i.useEffect)((function(){t?(Q(),setTimeout((function(){z(!0)}),600)):z(!1),q()}),[t]);var Y=["form-recom",t?"form-recom_opened":"",U?"form-recom_animated":""].join(" ").trim();return Object(f.jsx)("form",{className:Y,name:"formRecomendation",onSubmit:function(e){e.preventDefault(),a(V)},noValidate:!0,children:t&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"form-recom__input-container",children:[Object(f.jsx)(h.j,{id:"formRecommendTitle",sectionClass:"form-recom__input-wrap form-recom__input-wrap_medium form-recom__input-wrap_indentation",type:"text",name:"title",placeholder:g,onChange:J,value:V.title,required:!0,minLength:R.minLength,maxLength:R.maxLength,error:null===H||void 0===H?void 0:H.title}),Object(f.jsx)(h.j,{id:"formRecommendLink",sectionClass:"form-recom__input-wrap form-recom__input-wrap_medium",type:"text",name:"link",placeholder:_,onChange:J,value:V.link,error:null===H||void 0===H?void 0:H.link})]}),Object(f.jsx)(h.j,{id:"formRecommendAddress",sectionClass:"form-recom__input-wrap",type:"text",name:"address",placeholder:x,onChange:J,value:V.address,required:!0,minLength:E.minLength,maxLength:E.maxLength,error:null===H||void 0===H?void 0:H.address}),Object(f.jsxs)("div",{className:"form-recom__input-container",children:[Object(f.jsxs)("label",{className:"form-recom__label",htmlFor:"formRecommendationBoy",children:[Object(f.jsx)("input",{id:"formRecommendationBoy",className:"form-recom__input-radio",type:"radio",name:"gender",onChange:J,value:"male",required:!0}),Object(f.jsx)("span",{className:"form-recom__pseudo-radio ".concat((null===H||void 0===H?void 0:H.gender)?"form-recom__pseudo-radio_error":""),children:v})]}),Object(f.jsxs)("label",{className:"form-recom__label",htmlFor:"formRecommendationGirl",children:[Object(f.jsx)("input",{id:"formRecommendationGirl",className:"form-recom__input-radio",type:"radio",name:"gender",onChange:J,value:"female",required:!0}),Object(f.jsx)("span",{className:"form-recom__pseudo-radio ".concat((null===H||void 0===H?void 0:H.gender)?"form-recom__pseudo-radio_error":""),children:O})]}),Object(f.jsx)(h.j,{id:"formRecommendAge",sectionClass:"form-recom__input-wrap form-recom__input-wrap_narrow",type:"number",name:"age",placeholder:C,onChange:J,value:V.age,required:!0,max:M.max,min:M.min,error:null===H||void 0===H?void 0:H.age})]}),Object(f.jsx)(h.h,{placeholder:y,options:c,inputName:"activityType",onChange:J,error:null===H||void 0===H?void 0:H.activityType,isFormOpen:t}),Object(f.jsx)(h.h,{placeholder:P,options:j,inputName:"city",onChange:J,error:null===H||void 0===H?void 0:H.city,isFormOpen:t}),Object(f.jsx)(h.j,{id:"formRecommendDescription",sectionClass:"form-recom__input form-recom__input_textarea",type:"text",name:"description",placeholder:u,onChange:J,value:V.description,required:!0,error:null===H||void 0===H?void 0:H.description,isTextarea:!0}),Object(f.jsx)("span",{className:"form-error-message",children:A}),Object(f.jsxs)("div",{className:"form-recom__submit-zone",children:[Object(f.jsxs)("div",{className:"form-recom__add-photo",children:[(null===H||void 0===H?void 0:H.image)&&Object(f.jsx)("span",{className:"form-recom__add-photo-error",children:null===H||void 0===H?void 0:H.image}),Object(f.jsxs)("div",{className:"form-recom__add-photo-container",children:[(null===V||void 0===V?void 0:V.image)&&Object(f.jsx)("span",{className:"form-recom__add-photo-span form-recom__add-photo-span_text",children:F}),Object(f.jsxs)("label",{className:"form-recom__add-photo-label",htmlFor:"formRecomInputUpload",children:[Object(f.jsx)("input",{id:"formRecomInputUpload",type:"file",name:"image",accept:"image/png, image/jpeg",className:"form-recom__input-radio",onChange:function(e){return X(e,s.q)},required:!0}),!(null===V||void 0===V?void 0:V.image)&&Object(f.jsx)(h.d,{sectionClass:"form-recom__add-photo-btn ".concat((null===H||void 0===H?void 0:H.image)?"form-recom__add-photo-btn_error":""),color:"".concat((null===H||void 0===H?void 0:H.image)?"error":"lightGray"),isSmall:!0,isSpan:!0}),Object(f.jsx)("span",{className:"form-recom__add-photo-span ".concat((null===H||void 0===H?void 0:H.image)?"form-recom__add-photo-span_error":""),children:(null===V||void 0===V?void 0:V.image)?w:S})]})]})]}),Object(f.jsx)(h.b,{title:r?L:k,color:"blue",isDisabled:r||!K,isSubmittable:!0})]})]})})}B.defaultProps={activityTypes:[],isOpen:!1,onSubmit:function(){},isWaitingResponse:!1};var D=B;a(213);function q(e){var t=e.sectionClass,a=e.activityTypes,c=e.openSuccessPopup,r=Object(i.useContext)(o.c).setError,l=s.h.generalErrorMessage,m=s.g.unauthorized,u=s.g.badRequest,j=Object(i.useState)(!1),b=Object(n.a)(j,2),h=b[0],g=b[1],_=Object(i.useState)(!1),x=Object(n.a)(_,2),v=x[0],O=x[1],C=Object(i.useRef)(null),y=function(){g(!1)},P=["recommendation","recommendation_place_page","fade-in",t].join(" ").trim();return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("section",{className:P,ref:C,children:Object(f.jsxs)("div",{className:"recommendation__container",children:[h&&Object(f.jsx)("button",{className:"recommendation__close-button",type:"button","aria-label":p.closeButtonlabel,onClick:y}),Object(f.jsxs)("p",{className:"section-title recommendation__text",children:[p.recommendadionTextPart1,Object(f.jsx)("button",{className:"recommendation__text-link",type:"button",onClick:function(){g(!0),C.current.scrollIntoView({behavior:"smooth"})},children:p.recommendadionButton}),p.recommendadionTextPart2]}),Object(f.jsx)(D,{isOpen:h,onSubmit:function(e){O(!0),Object(d.f)(function(e){var t=new FormData;return e.link&&t.append("link",e.link),t.append("image",e.image),t.append("title",e.title),t.append("description",e.description),t.append("address",e.address),t.append("gender",e.gender),t.append("age",e.age),t.append("city",e.city),t.append("activityType",e.activityType),t}(e)).then((function(){c(),y()})).catch((function(e){(null===e||void 0===e?void 0:e.status)===u||(null===e||void 0===e?void 0:e.status)===m?r(null===e||void 0===e?void 0:e.data):r({message:l.title})})).finally((function(){return O(!1)}))},activityTypes:a,isWaitingResponse:v})]})})})}q.defaultProps={activityTypes:[],sectionClass:"",openSuccessPopup:function(){}};var A=q,I=a(45),G=a(175),U=a(27),z=(a(214),a(187)),W=a(5),V=r.a.headTitle,J=r.a.headDescription,H=r.a.title,K=r.a.textStubNoData,Q=r.a.paragraphNoContent,X=r.a.toMainPageLinkTitle,Y={small:8,default:12},Z={small:1024};t.default=function(){var e,t=Object(c.i)().placeId,a=Object(l.a)(),r=a.activityTypes,p=a.activityTypesSimplified,j=Object(i.useContext)(o.b).currentUser,b=Object(i.useContext)(o.d).openPopupCities,g=Object(l.m)(s.o)(),_=null!==(e=null===j||void 0===j?void 0:j.city)&&void 0!==e?e:g,x=Object(i.useState)(!1),v=Object(n.a)(x,2),O=v[0],C=v[1],y=Object(l.n)(Z,Y).pageSize,P=Object(i.useState)(!1),N=Object(n.a)(P,2),T=N[0],k=N[1],S=Object(i.useState)(!1),w=Object(n.a)(S,2),F=w[0],L=w[1],R=function(){L(!0)},E=Object(l.p)({apiCallback:d.c,dynamicParam:t,setIsPageError:k}),M=E.singleCard,B=E.isSingleCardShown,D={apiGetDataCallback:d.d,apiGetFiltersCallback:d.e,apiGetMainCardCallback:d.b,apiFilterNames:{tags:"tags",chosen:"chosen",ageRestriction:"age_restriction"},userCity:_,pageSize:y,setIsPageError:k,dontStartWhileTrue:!!t},q=Object(l.i)(D),$=q.dataToRender,ee=q.filters,te=q.ageFilters,ae=q.mainCard,ne=q.isMainCard,ie=q.isMainCardShown,ce=q.isPageLoading,re=q.isFiltersUsed,oe=q.isPaginationUsed,se=q.isNoFilteredResults,le=q.isFormRecommendationShown,de=q.totalPages,me=q.pageIndex,ue=q.changePageIndex,pe=q.changeFilter,je=q.changeAgeFilter,be=q.resetStatesAndGetNewData;return Object(i.useEffect)((function(){_||setTimeout((function(){b()}),s.f)}),[]),Object(i.useEffect)((function(){ce||t||(C(!0),be())}),[_]),Object(i.useEffect)((function(){O&&!t&&C(!1)}),[$]),ce||t&&!B?Object(f.jsx)(h.l,{isCentered:!0}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(m.a,{headTitle:V,headDescription:J,children:Object(f.jsx)("section",{className:"places page__section",children:function(){if(T||!ne&&!$.length&&!t&&!se)return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(I.a,{titleText:T?s.h.generalErrorMessage.title:K}),j&&!T&&Object(f.jsx)(A,{activityTypes:r})]});return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(h.x,{title:H,sectionClass:"places__title fade-in"}),he()]})}()})}),Object(f.jsx)(U.g,{isOpen:F,onClose:function(){L(!1)}})]});function he(){return B?Object(f.jsxs)("div",{className:"places__single-card-container scale-in",children:[Object(f.jsx)(u.a,{data:M,activityTypesSimplified:p,sectionClass:"card-container_type_main-article",isBig:!0}),Object(f.jsx)(z.c,{sectionClass:"places__single-card-paragraph",children:Object(f.jsx)("p",{className:"paragraph",children:M.description})}),Object(f.jsx)(h.p,{text:X,href:W.v})]}):O?Object(f.jsx)(h.l,{isPaginate:!0}):Object(f.jsxs)(f.Fragment,{children:[_e(),xe(),j&&le&&!re&&Object(f.jsx)(A,{activityTypes:r,openSuccessPopup:R}),re?Object(f.jsx)(h.l,{isPaginate:!0}):fe()]})}function fe(){return se?Object(f.jsx)(h.q,{text:Q,isAnimated:!0,sectionClass:"no-data-text_padding-top"}):ne||$.length>0?Object(f.jsxs)(f.Fragment,{children:[ne&&ie&&Object(f.jsx)("section",{className:"places__main",children:Object(f.jsx)(u.a,{data:ae,activityTypesSimplified:p,sectionClass:"card-container_type_main-article scale-in",isBig:!0},null===ae||void 0===ae?void 0:ae.id)}),oe?Object(f.jsx)(h.l,{isPaginate:!0}):Object(f.jsx)("section",{className:"places__cards-grid",children:$.map((function(e,t){return Object(f.jsx)(u.a,{data:e,activityTypesSimplified:p,color:s.c[(t+1)%s.c.length],sectionClass:"card-container_type_article scale-in"},null===e||void 0===e?void 0:e.id)}))}),ge()]}):null}function ge(){return de>1?Object(f.jsx)(h.r,{sectionClass:"cards-section__pagination",pageCount:de,value:me,onChange:ue}):null}function _e(){return ee.length>2?Object(f.jsx)(G.a,{filterList:ee,name:"categories",handleClick:pe,sectionClass:"fade-in"}):null}function xe(){return t?null:Object(f.jsx)(G.a,{filterList:te,name:"ages",handleClick:je,sectionClass:"places__tags fade-in"})}}}}]);
//# sourceMappingURL=7.cb01212c.chunk.js.map