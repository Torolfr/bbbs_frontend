(this.webpackJsonpbbbs_team3_react=this.webpackJsonpbbbs_team3_react||[]).push([[7],{175:function(e,t,a){"use strict";var n=a(4),i=(a(176),a(0));function c(e){var t=e.filterList,a=e.name,c=e.handleClick,r=["tags",e.sectionClass].join(" ").trim(),o=["tags__list",t.length>3?"tags__list_mobile":""].join(" ").trim();return Object(i.jsx)("div",{className:r,children:Object(i.jsx)("ul",{className:o,children:t.map((function(e){return Object(i.jsx)("li",{className:"tags__list-item",children:Object(i.jsx)(n.r,{name:a,value:null===e||void 0===e?void 0:e.filter,title:null===e||void 0===e?void 0:e.name,isActive:null===e||void 0===e?void 0:e.isActive,onClick:c})},null===e||void 0===e?void 0:e.name)}))})})}c.defaultProps={filterList:[],sectionClass:"",name:"",handleClick:function(){}},t.a=c},176:function(e,t,a){},178:function(e,t,a){"use strict";var n={linkText:"\u0447\u0438\u0442\u0430\u0442\u044c \u043d\u0430 \u0441\u0430\u0439\u0442\u0435"},i=a(6),c=a(47),r=a(4),o=(a(180),a(0));function s(e){var t=e.data,a=t.title,s=t.info,l=t.annotation,d=t.image,m=t.articleUrl,u=e.isMain,p=e.color,j=["card-container",u?"card-container_type_main-article":"card-container_type_article fade-in",e.sectionClass].join(" ").trim(),b=u?"yellow":p;return Object(o.jsxs)("article",{className:j,children:[Object(o.jsxs)(r.f,{sectionClass:"article-card ".concat(u?"article-card_main":""),color:b,children:[Object(o.jsxs)("div",{className:"article-card__title-wrap",children:[Object(o.jsx)("a",{draggable:"false",href:m,className:"article-card__link-wrap",target:"_blank",rel:"noopener noreferrer",children:Object(o.jsx)(r.x,{sectionClass:"article-card__title",title:a})}),Object(o.jsx)(r.e,{sectionClass:"article-card__info",title:s})]}),u&&Object(o.jsx)("div",{className:"article-card__link-wrap article-card__link-wrap_content_article-img",children:d&&Object(o.jsx)("img",{draggable:"false",src:"".concat(i.c,"/").concat(d),alt:a,className:"article-card__image"})}),Object(o.jsx)("a",{draggable:"false",href:m,className:"link article-card__link",target:"_blank",rel:"noopener noreferrer",children:n.linkText})]}),Object(o.jsx)(c.a,{description:l,isMain:u})]})}s.defaultProps={data:{},title:"",info:"",image:"",articleUrl:"",annotation:"",isMain:!1,color:"white",sectionClass:""};t.a=s},180:function(e,t,a){},187:function(e,t,a){"use strict";var n=a(45);a.d(t,"b",(function(){return n.a}));var i=a(178);a.d(t,"d",(function(){return i.a}));var c=a(46);a.d(t,"a",(function(){return c.a}));var r=a(4);a.d(t,"h",(function(){return r.w})),a.d(t,"g",(function(){return r.q})),a.d(t,"e",(function(){return r.k})),a.d(t,"f",(function(){return r.o})),a.d(t,"c",(function(){return r.f}))},212:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){},252:function(e,t,a){"use strict";a.r(t);var n=a(3),i=a(1),c=a(15),r=a(72),o=a(7),s=a(2),l=a(11),d=a(57),m=a(45),u=a(52),p={closeButtonlabel:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0444\u043e\u0440\u043c\u0443",recommendadionTextPart1:"\u0415\u0441\u043b\u0438 \u0432\u044b \u0431\u044b\u043b\u0438 \u0432 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u043e\u043c \u043c\u0435\u0441\u0442\u0435 \u0438 \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u043e\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u043e\u0432\u0430\u0442\u044c \u0435\u0433\u043e \u0434\u0440\u0443\u0433\u0438\u043c".concat("\xa0","\u043d\u0430\u0441\u0442\u0430\u0432\u043d\u0438\u043a\u0430\u043c \u2013","\xa0"),recommendadionButton:"\u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435".concat("\xa0","\u0444\u043e\u0440\u043c\u0443"),recommendadionTextPart2:", \u0438 \u043c\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u043c \u0432\u0430\u0448\u0443".concat("\xa0","\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u044e.")},j={titlePlaceholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435*",linkPlaceholder:"\u0421\u0430\u0439\u0442",addressPlaceholder:"\u0410\u0434\u0440\u0435\u0441*",genderMale:"\u041c\u0430\u043b\u044c\u0447\u0438\u043a",genderFemale:"\u0414\u0435\u0432\u043e\u0447\u043a\u0430",agePlaceholder:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442*",activityPlaceholder:"\u0422\u0438\u043f \u043e\u0442\u0434\u044b\u0445\u0430*",cityPlaceholder:"\u0413\u043e\u0440\u043e\u0434*",descPlaceholder:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439* \u041f\u043e\u0434\u0435\u043b\u0438\u0442\u0435\u0441\u044c \u0432\u043f\u0435\u0447\u0430\u0442\u043b\u0435\u043d\u0438\u044f\u043c\u0438 \u043e \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u043d\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438",descPlaceholderMobile:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439*",buttonText:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c",buttonTextLoading:"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430...",addPhotoBtnDefault:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e",addPhotoBtnChange:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c",addPhotoAdded:"\u0424\u043e\u0442\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e"},b=a(32),f=a(50),h=a(4),g=(a(212),a(0)),_=j.titlePlaceholder,x=j.linkPlaceholder,O=j.addressPlaceholder,v=j.genderMale,C=j.genderFemale,y=j.agePlaceholder,P=j.activityPlaceholder,N=j.cityPlaceholder,k=j.descPlaceholder,T=j.descPlaceholderMobile,S=j.buttonText,w=j.addPhotoBtnDefault,F=j.addPhotoBtnChange,R=j.addPhotoAdded,L=j.buttonTextLoading;function E(e){var t=e.isOpen,a=e.onSubmit,c=e.activityTypes,r=e.isWaitingResponse,d=Object(i.useState)(""),m=Object(n.a)(d,2),u=m[0],p=m[1];Object(i.useEffect)((function(){var e=window.matchMedia("(max-width: ".concat(900,"px)")),t=function(){e.matches?p(T):p(k)};return t(),e.addEventListener("change",t),function(){e.removeEventListener("change",t)}}),[]);var j=Object(i.useContext)(o.a).cities,E=Object(i.useContext)(o.c),M=E.serverError,B=E.clearError,q=M?Object(f.a)(M):"",D=Object(i.useState)(!1),A=Object(n.a)(D,2),I=A[0],G=A[1],U=Object(l.k)(),z=U.values,W=U.handleChange,V=U.errors,J=U.isValid,H=U.resetForm,K=U.handleChangeFiles;Object(i.useEffect)((function(){t?(H(),setTimeout((function(){G(!0)}),600)):G(!1),B()}),[t]);var Q=["form-recom",t?"form-recom_opened":"",I?"form-recom_animated":""].join(" ").trim();return Object(g.jsx)("form",{className:Q,name:"formRecomendation",onSubmit:function(e){e.preventDefault(),a(z)},noValidate:!0,children:t&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"form-recom__input-container",children:[Object(g.jsx)(h.i,{id:"formRecommendTitle",sectionClass:"form-recom__input-wrap form-recom__input-wrap_medium form-recom__input-wrap_indentation",type:"text",name:"title",placeholder:_,onChange:W,value:z.title,required:!0,minLength:b.b.title.minLength,maxLength:b.b.title.maxLength,error:null===V||void 0===V?void 0:V.title}),Object(g.jsx)(h.i,{id:"formRecommendLink",sectionClass:"form-recom__input-wrap form-recom__input-wrap_medium",type:"text",name:"link",placeholder:x,onChange:W,value:z.link,error:null===V||void 0===V?void 0:V.link})]}),Object(g.jsx)(h.i,{id:"formRecommendAddress",sectionClass:"form-recom__input-wrap",type:"text",name:"address",placeholder:O,onChange:W,value:z.address,required:!0,minLength:b.b.address.minLength,maxLength:b.b.address.maxLength,error:null===V||void 0===V?void 0:V.address}),Object(g.jsxs)("div",{className:"form-recom__input-container",children:[Object(g.jsxs)("label",{className:"form-recom__label",htmlFor:"formRecommendationBoy",children:[Object(g.jsx)("input",{id:"formRecommendationBoy",className:"form-recom__input-radio",type:"radio",name:"gender",onChange:W,value:"male",required:!0}),Object(g.jsx)("span",{className:"form-recom__pseudo-radio ".concat((null===V||void 0===V?void 0:V.gender)?"form-recom__pseudo-radio_error":""),children:v})]}),Object(g.jsxs)("label",{className:"form-recom__label",htmlFor:"formRecommendationGirl",children:[Object(g.jsx)("input",{id:"formRecommendationGirl",className:"form-recom__input-radio",type:"radio",name:"gender",onChange:W,value:"female",required:!0}),Object(g.jsx)("span",{className:"form-recom__pseudo-radio ".concat((null===V||void 0===V?void 0:V.gender)?"form-recom__pseudo-radio_error":""),children:C})]}),Object(g.jsx)(h.i,{id:"formRecommendAge",sectionClass:"form-recom__input-wrap form-recom__input-wrap_narrow",type:"number",name:"age",placeholder:y,onChange:W,value:z.age,required:!0,max:b.b.age.max,min:b.b.age.min,error:null===V||void 0===V?void 0:V.age})]}),Object(g.jsx)(h.h,{placeholder:P,options:c,inputName:"activityType",onChange:W,error:null===V||void 0===V?void 0:V.activityType,isFormOpen:t}),Object(g.jsx)(h.h,{placeholder:N,options:j,inputName:"city",onChange:W,error:null===V||void 0===V?void 0:V.city,isFormOpen:t}),Object(g.jsx)(h.i,{id:"formRecommendDescription",sectionClass:"form-recom__input form-recom__input_textarea",type:"text",name:"description",placeholder:u,onChange:W,value:z.description,required:!0,error:null===V||void 0===V?void 0:V.description,isTextarea:!0}),Object(g.jsx)("span",{className:"form-error-message",children:q}),Object(g.jsxs)("div",{className:"form-recom__submit-zone",children:[Object(g.jsxs)("div",{className:"form-recom__add-photo",children:[(null===V||void 0===V?void 0:V.image)&&Object(g.jsx)("span",{className:"form-recom__add-photo-error",children:null===V||void 0===V?void 0:V.image}),Object(g.jsxs)("div",{className:"form-recom__add-photo-container",children:[(null===z||void 0===z?void 0:z.image)&&Object(g.jsx)("span",{className:"form-recom__add-photo-span form-recom__add-photo-span_text",children:R}),Object(g.jsxs)("label",{className:"form-recom__add-photo-label",htmlFor:"formRecomInputUpload",children:[Object(g.jsx)("input",{id:"formRecomInputUpload",type:"file",name:"image",accept:"image/png, image/jpeg",className:"form-recom__input-radio",onChange:function(e){return K(e,s.q)},required:!0}),!(null===z||void 0===z?void 0:z.image)&&Object(g.jsx)(h.d,{sectionClass:"form-recom__add-photo-btn ".concat((null===V||void 0===V?void 0:V.image)?"form-recom__add-photo-btn_error":""),color:"".concat((null===V||void 0===V?void 0:V.image)?"error":"lightGray"),isSmall:!0,isSpan:!0}),Object(g.jsx)("span",{className:"form-recom__add-photo-span ".concat((null===V||void 0===V?void 0:V.image)?"form-recom__add-photo-span_error":""),children:(null===z||void 0===z?void 0:z.image)?F:w})]})]})]}),Object(g.jsx)(h.b,{title:r?L:S,color:"blue",isDisabled:r||!J,isSubmittable:!0})]})]})})}E.defaultProps={activityTypes:[],isOpen:!1,onSubmit:function(){},isWaitingResponse:!1};var M=E;a(213);function B(e){var t=e.sectionClass,a=e.activityTypes,c=e.openSuccessPopup,r=Object(i.useContext)(o.c).setError,l=s.h.generalErrorMessage,m=s.g.unauthorized,u=s.g.badRequest,j=Object(i.useState)(!1),b=Object(n.a)(j,2),f=b[0],h=b[1],_=Object(i.useState)(!1),x=Object(n.a)(_,2),O=x[0],v=x[1],C=Object(i.useRef)(null),y=function(){h(!1)},P=["recommendation","recommendation_place_page","fade-in",t].join(" ").trim();return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("section",{className:P,ref:C,children:Object(g.jsxs)("div",{className:"recommendation__container",children:[f&&Object(g.jsx)("button",{className:"recommendation__close-button",type:"button","aria-label":p.closeButtonlabel,onClick:y}),Object(g.jsxs)("p",{className:"section-title recommendation__text",children:[p.recommendadionTextPart1,Object(g.jsx)("button",{className:"recommendation__text-link",type:"button",onClick:function(){h(!0),C.current.scrollIntoView({behavior:"smooth"})},children:p.recommendadionButton}),p.recommendadionTextPart2]}),Object(g.jsx)(M,{isOpen:f,onSubmit:function(e){v(!0),Object(d.f)(function(e){var t=new FormData;return e.link&&t.append("link",e.link),t.append("image",e.image),t.append("title",e.title),t.append("description",e.description),t.append("address",e.address),t.append("gender",e.gender),t.append("age",e.age),t.append("city",e.city),t.append("activityType",e.activityType),t}(e)).then((function(){c(),y()})).catch((function(e){(null===e||void 0===e?void 0:e.status)===u||(null===e||void 0===e?void 0:e.status)===m?r(null===e||void 0===e?void 0:e.data):r({message:l.title})})).finally((function(){return v(!1)}))},activityTypes:a,isWaitingResponse:O})]})})})}B.defaultProps={activityTypes:[],sectionClass:"",openSuccessPopup:function(){}};var q=B,D=a(46),A=a(175),I=a(27),G=(a(214),a(187)),U=a(5),z=r.a.headTitle,W=r.a.headDescription,V=r.a.title,J=r.a.textStubNoData,H=r.a.paragraphNoContent,K=r.a.toMainPageLinkTitle,Q={small:8,default:12},X={small:1024};t.default=function(){var e,t=Object(c.i)().placeId,a=Object(l.a)(),r=a.activityTypes,p=a.activityTypesSimplified,j=Object(i.useContext)(o.b).currentUser,b=Object(i.useContext)(o.d).openPopupCities,f=Object(l.m)(s.o)(),_=null!==(e=null===j||void 0===j?void 0:j.city)&&void 0!==e?e:f,x=Object(i.useState)(!1),O=Object(n.a)(x,2),v=O[0],C=O[1],y=Object(l.n)(X,Q).pageSize,P=Object(i.useState)(!1),N=Object(n.a)(P,2),k=N[0],T=N[1],S=Object(i.useState)(!1),w=Object(n.a)(S,2),F=w[0],R=w[1],L=function(){R(!0)},E=Object(l.p)({apiCallback:d.c,dynamicParam:t,setIsPageError:T}),M=E.singleCard,B=E.isSingleCardShown,Y={apiGetDataCallback:d.d,apiGetFiltersCallback:d.e,apiGetMainCardCallback:d.b,apiFilterNames:{tags:"tags",chosen:"chosen",ageRestriction:"age_restriction"},userCity:_,pageSize:y,setIsPageError:T,dontStartWhileTrue:!!t},Z=Object(l.i)(Y),$=Z.dataToRender,ee=Z.filters,te=Z.ageFilters,ae=Z.mainCard,ne=Z.isMainCard,ie=Z.isMainCardShown,ce=Z.isPageLoading,re=Z.isFiltersUsed,oe=Z.isPaginationUsed,se=Z.isNoFilteredResults,le=Z.isFormRecommendationShown,de=Z.totalPages,me=Z.pageIndex,ue=Z.changePageIndex,pe=Z.changeFilter,je=Z.changeAgeFilter,be=Z.resetStatesAndGetNewData;return Object(i.useEffect)((function(){_||setTimeout((function(){b()}),s.f)}),[]),Object(i.useEffect)((function(){ce||t||(C(!0),be())}),[_]),Object(i.useEffect)((function(){v&&!t&&C(!1)}),[$]),ce||t&&!B?Object(g.jsx)(h.k,{isCentered:!0}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(m.a,{headTitle:z,headDescription:W,children:Object(g.jsx)("section",{className:"places page__section",children:function(){if(k||!ne&&!$.length&&!t&&!se)return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(D.a,{titleText:k?s.h.generalErrorMessage.title:J}),j&&!k&&Object(g.jsx)(q,{activityTypes:r})]});return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(h.w,{title:V,sectionClass:"places__title fade-in"}),fe()]})}()})}),Object(g.jsx)(I.g,{isOpen:F,onClose:function(){R(!1)}})]});function fe(){return B?Object(g.jsxs)("div",{className:"places__single-card-container scale-in",children:[Object(g.jsx)(u.a,{data:M,activityTypesSimplified:p,sectionClass:"card-container_type_main-article",isBig:!0}),Object(g.jsx)(G.c,{sectionClass:"places__single-card-paragraph",children:Object(g.jsx)("p",{className:"paragraph",children:M.description})}),Object(g.jsx)(h.o,{text:K,href:U.v})]}):v?Object(g.jsx)(h.k,{isPaginate:!0}):Object(g.jsxs)(g.Fragment,{children:[_e(),xe(),j&&le&&!re&&Object(g.jsx)(q,{activityTypes:r,openSuccessPopup:L}),re?Object(g.jsx)(h.k,{isPaginate:!0}):he()]})}function he(){return se?Object(g.jsx)(h.p,{text:H,isAnimated:!0,sectionClass:"no-data-text_padding-top"}):ne||$.length>0?Object(g.jsxs)(g.Fragment,{children:[ne&&ie&&Object(g.jsx)("section",{className:"places__main",children:Object(g.jsx)(u.a,{data:ae,activityTypesSimplified:p,sectionClass:"card-container_type_main-article scale-in",isBig:!0},ae.id)}),oe?Object(g.jsx)(h.k,{isPaginate:!0}):Object(g.jsx)("section",{className:"places__cards-grid",children:$.map((function(e,t){return Object(g.jsx)(u.a,{data:e,activityTypesSimplified:p,color:s.c[(t+1)%s.c.length],sectionClass:"card-container_type_article scale-in"},e.id)}))}),ge()]}):null}function ge(){return de>1?Object(g.jsx)(h.q,{sectionClass:"cards-section__pagination",pageCount:de,value:me,onChange:ue}):null}function _e(){return ee.length>2?Object(g.jsx)(A.a,{filterList:ee,name:"categories",handleClick:pe,sectionClass:"fade-in"}):null}function xe(){return t?null:Object(g.jsx)(A.a,{filterList:te,name:"ages",handleClick:je,sectionClass:"places__tags fade-in"})}}}}]);